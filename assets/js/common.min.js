$(document).ready(function(){
    $(".SlectBox").SumoSelect({showTitle:false});
    $('.SlectBox.first').on('sumo:closing', function() {
        xz._data.currency = $('.first + p span').html().trim() == 'WMZ'?2:1
    });
    $('.SlectBox.second').on('sumo:closing', function() {
        xz._data.currency2 = $('.second + p span').html().trim() == 'WMZ'?2:1
    });
});
"use strict";

Vue.filter('toCurrency', function (value) {
    if (typeof value !== "number") {
        return value;
    }

    var formatter = new Intl.NumberFormat('ru', {
        //                style: 'currency',
        //                currency: 'RUB',
        minimumFractionDigits: 0
    });
    return formatter.format(value);
});
var xz = new Vue({
    el: '#app',
    data: {
        data_landing: {},
        buy: '',
        sell: '',
        currency: 0,
        currency2: 0
    },
    computed: {
        buy2: function buy2() {
            var factor;

            if (this.currency == 1) {
                factor = this.data_landing.bay_WMR;
            } else if (this.currency == 2) {
                factor = this.data_landing.bay_WMZ;
            }

            return this.buy * factor;
        },
        sell2: function sell2() {
            var factor;

            if (this.currency2 == 1) {
                factor = this.data_landing.sale_WMR;
            } else if (this.currency2 == 2) {
                factor = this.data_landing.sale_WMZ;
            }

            return this.sell / factor;
        },
        cleanPhone: function cleanPhone() {
            if (this.data_landing.phone) {
                return 'tel:' + this.data_landing.phone.replace(/[-+()\s]/g, '');
            }

            return '';
        }
    },

    created: function created() {
        var _this = this;

        fetch("/ajax.php").then(function (res) {
            return res.json();
        }).then(function (res) {
            _this.data_landing = res;
        });

    }
});
